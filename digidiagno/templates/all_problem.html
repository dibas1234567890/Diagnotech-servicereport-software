{% extends 'base.html' %}

{%  block title %} Problems List {% endblock %}

{% block content %}
{% if user.is_authenticated %}
{% include "header.html" %}
{% endif %}



<div class="container mt-2">
    <div class="row">
        <div class="col-lg-12 col-sm-6">
            <div class="card text-center">
                <div class="card-header">
                    All Problems
                </div>
                <div class="card-body table-responsive">
            <table class=" table text-black ">
                <tr>
                    <th>
                        Client 
                    </th>
                    <th>
                        Machine S.N 
                    </th>
                    <th>
                        Engineer 
                    </th>
                    <th>
                        Date 
                    </th>
                    <th>
                        Remarks 
                    </th>
                    <th>
                        Detailed Desc 
                    </th>
                    <th>
                        Name 
                    </th>  
                    <th>
                        Status 
                    </th> 
                    <th>
                        Model 
                    </th>
            
                </tr>
            
            {%  for i in problems %}
                <tr>
                    <td>{{ i.client }}</td>
                    <td>{{ i.machine.machine_serial_number }}</td>
                    <td>{{ i.engineer }}</td>
                    <td>{{ i.date }}</td>
                    <td>{{ i.remarks }}</td>
                    <td>{{ i.detailed_desc }}</td>
                    <td>{{ i.name }}</td>
                    <td>{{ i.status }}</td>
                    <td>{{ i.machine.model }}</td>
                    
                    
                </tr>
            {% endfor %}
            </table>
        </div>
    </div>
</div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="d-flex mt-2 .justify-content-end">
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    {% if page_obj.has_previous %}
                    <li class="page-item"><a href="?page=1" class="page-link">&laquo; first</a></li>
                    <li class="page-item">
                    <a href="?page={{ page_obj.previous_page_number }}" class="page-link">previous</a></li>
                    {% endif %}
                  <li class="page-item"><a class="page-link" href="#">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                </a></li>
                {% if page_obj.has_next %}
                  <li class="page-item">
                    
                    <a href="?page={{ page_obj.next_page_number }}" class="page-link">next</a>
                    </li>
                    <li class="page-item">
                        <a href="?page={{ page_obj.paginator.num_pages }}" class="page-link">last &raquo;</a>
                {% endif %}
                  </li>
                </ul>
              </nav>
              <a href="{%  url 'export_all_problem' %}" mx-auto><button class="btn btn-info mx-auto text-white h-auto" >
                Download All Problems
              </button></a>
        </div>
    </div>
</div>
</div>


{% endblock %}